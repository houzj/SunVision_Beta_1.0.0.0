<Window x:Class="VisionMaster.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VisionMaster.UI.Views"
        mc:Ignorable="d"
        Title="VisionMaster - 机器视觉平台" Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized">

    <DockPanel>
        <!-- 菜单栏 -->
        <Menu DockPanel.Dock="Top" Background="{StaticResource BackgroundBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
            <MenuItem Header="文件(_F)">
                <MenuItem Header="新建方案(_N)" InputGestureText="Ctrl+N"/>
                <MenuItem Header="打开方案(_O)" InputGestureText="Ctrl+O"/>
                <MenuItem Header="保存方案(_S)" InputGestureText="Ctrl+S"/>
                <Separator/>
                <MenuItem Header="退出(_X)" InputGestureText="Alt+F4"/>
            </MenuItem>
            <MenuItem Header="编辑(_E)">
                <MenuItem Header="撤销(_U)" InputGestureText="Ctrl+Z"/>
                <MenuItem Header="重做(_R)" InputGestureText="Ctrl+Y"/>
                <MenuItem Header="复制(_C)" InputGestureText="Ctrl+C"/>
                <MenuItem Header="粘贴(_V)" InputGestureText="Ctrl+V"/>
                <MenuItem Header="删除(_D)" InputGestureText="Del"/>
            </MenuItem>
            <MenuItem Header="视图(_V)">
                <MenuItem Header="工作流(_W)"/>
                <MenuItem Header="结果窗口(_R)"/>
                <MenuItem Header="属性窗口(_P)"/>
                <MenuItem Header="工具箱(_T)"/>
                <MenuItem Header="日志窗口(_L)"/>
            </MenuItem>
            <MenuItem Header="运行(_R)">
                <MenuItem Header="运行(_R)" InputGestureText="F5"/>
                <MenuItem Header="停止(_S)" InputGestureText="Shift+F5"/>
            </MenuItem>
            <MenuItem Header="工具(_T)">
                <MenuItem Header="相机配置(_C)"/>
                <MenuItem Header="参数管理(_P)"/>
                <MenuItem Header="插件管理(_L)"/>
                <MenuItem Header="系统设置(_S)"/>
            </MenuItem>
            <MenuItem Header="帮助(_H)">
                <MenuItem Header="关于(_A)"/>
            </MenuItem>
        </Menu>

        <!-- 工具栏 -->
        <ToolBar DockPanel.Dock="Top" Background="{StaticResource HeaderBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
            <Button ToolTip="新建" Padding="8,4" Margin="2">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="📄" FontSize="16"/>
                    <TextBlock Text="新建" Margin="5,0,0,0"/>
                </StackPanel>
            </Button>
            <Button ToolTip="打开" Padding="8,4" Margin="2">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="📂" FontSize="16"/>
                    <TextBlock Text="打开" Margin="5,0,0,0"/>
                </StackPanel>
            </Button>
            <Button ToolTip="保存" Padding="8,4" Margin="2">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="💾" FontSize="16"/>
                    <TextBlock Text="保存" Margin="5,0,0,0"/>
                </StackPanel>
            </Button>
            <Separator/>
            <Button ToolTip="运行" Padding="8,4" Margin="2">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="▶️" FontSize="16"/>
                    <TextBlock Text="运行" Margin="5,0,0,0"/>
                </StackPanel>
            </Button>
            <Button ToolTip="停止" Padding="8,4" Margin="2">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="⏹️" FontSize="16"/>
                    <TextBlock Text="停止" Margin="5,0,0,0"/>
                </StackPanel>
            </Button>
        </ToolBar>

        <!-- 状态栏 -->
        <StatusBar DockPanel.Dock="Bottom" Background="{StaticResource HeaderBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,1,0,0">
            <StatusBarItem>
                <TextBlock Text="就绪" x:Name="StatusText"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <TextBlock Text="相机: 未连接" x:Name="CameraStatus"/>
            </StatusBarItem>
        </StatusBar>

        <!-- 主内容区 -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="200"/>
            </Grid.RowDefinitions>

            <!-- 左侧: 方案树和工具箱 -->
            <Border Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Background="#FFFFFF" BorderBrush="#CCCCCC" BorderThickness="0,0,1,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Expander Grid.Row="0" Header="方案树" IsExpanded="True" Margin="2">
                        <TreeView Background="#FFFFFF" BorderBrush="#DDDDDD" BorderThickness="1" Height="200" x:Name="SolutionTree">
                            <TreeViewItem Header="解决方案" IsExpanded="True">
                                <TreeViewItem Header="流程1" IsExpanded="True">
                                    <TreeViewItem Header="图像采集"/>
                                    <TreeViewItem Header="预处理"/>
                                    <TreeViewItem Header="特征检测"/>
                                    <TreeViewItem Header="结果输出"/>
                                </TreeViewItem>
                            </TreeViewItem>
                        </TreeView>
                    </Expander>

                    <Expander Grid.Row="1" Header="工具箱" IsExpanded="True" Margin="2">
                        <TreeView Background="#FFFFFF" BorderBrush="#DDDDDD" BorderThickness="1" x:Name="ToolBoxTree">
                            <TreeViewItem Header="图像处理" IsExpanded="True">
                                <TreeViewItem Header="图像采集"/>
                                <TreeViewItem Header="图像读取"/>
                                <TreeViewItem Header="图像保存"/>
                            </TreeViewItem>
                            <TreeViewItem Header="预处理" IsExpanded="True">
                                <TreeViewItem Header="灰度化"/>
                                <TreeViewItem Header="二值化"/>
                                <TreeViewItem Header="滤波"/>
                                <TreeViewItem Header="边缘检测"/>
                            </TreeViewItem>
                            <TreeViewItem Header="特征提取" IsExpanded="True">
                                <TreeViewItem Header="轮廓提取"/>
                                <TreeViewItem Header="直线检测"/>
                                <TreeViewItem Header="圆检测"/>
                            </TreeViewItem>
                            <TreeViewItem Header="深度学习" IsExpanded="True">
                                <TreeViewItem Header="目标检测"/>
                                <TreeViewItem Header="图像分割"/>
                            </TreeViewItem>
                        </TreeView>
                    </Expander>
                </Grid>
            </Border>

            <!-- 中间: 工作流画布 -->
            <Border Grid.Column="1" Grid.Row="0" Background="#F8F8F8" BorderBrush="#CCCCCC" BorderThickness="1" Padding="2">
                <Canvas x:Name="WorkflowCanvas" Background="#FFFFFF">
                    <!-- 示例节点 -->
                    <Border Canvas.Left="50" Canvas.Top="80" Width="120" Height="80" Background="#E8F4F8" BorderBrush="#0066CC" BorderThickness="2" CornerRadius="5">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="📷" FontSize="24" HorizontalAlignment="Center"/>
                            <TextBlock Text="图像采集" FontSize="12" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>

                    <Border Canvas.Left="220" Canvas.Top="80" Width="120" Height="80" Background="#FFF8E8" BorderBrush="#FF9900" BorderThickness="2" CornerRadius="5">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="🔧" FontSize="24" HorizontalAlignment="Center"/>
                            <TextBlock Text="预处理" FontSize="12" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>

                    <Border Canvas.Left="390" Canvas.Top="80" Width="120" Height="80" Background="#E8FFF8" BorderBrush="#00CC99" BorderThickness="2" CornerRadius="5">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="🎯" FontSize="24" HorizontalAlignment="Center"/>
                            <TextBlock Text="特征检测" FontSize="12" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>

                    <Border Canvas.Left="560" Canvas.Top="80" Width="120" Height="80" Background="#F8E8FF" BorderBrush="#9900CC" BorderThickness="2" CornerRadius="5">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="📊" FontSize="24" HorizontalAlignment="Center"/>
                            <TextBlock Text="结果输出" FontSize="12" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>

                    <!-- 连接线 -->
                    <Path Stroke="Gray" StrokeThickness="2" Fill="None" StrokeDashArray="5,3">
                        <Path.Data>
                            <GeometryGroup>
                                <LineGeometry StartPoint="170,120" EndPoint="220,120"/>
                                <LineGeometry StartPoint="340,120" EndPoint="390,120"/>
                                <LineGeometry StartPoint="510,120" EndPoint="560,120"/>
                            </GeometryGroup>
                        </Path.Data>
                    </Path>
                </Canvas>
            </Border>

            <!-- 中间下方: 结果窗口 -->
            <Border Grid.Column="1" Grid.Row="1" Background="#FFFFFF" BorderBrush="#CCCCCC" BorderThickness="0,1,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0" Background="#F0F0F0" BorderBrush="#CCCCCC" BorderThickness="0,0,0,1" Padding="8,4">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📷" FontSize="14" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="结果窗口" FontWeight="Bold" VerticalAlignment="Center" FontSize="13"/>
                        </StackPanel>
                    </Border>
                    <Border Grid.Row="1" Background="#333333" Padding="10">
                        <TextBlock Text="图像显示区域" Foreground="#888888" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                </Grid>
            </Border>

            <!-- 右侧: 属性面板 -->
            <Border Grid.Column="2" Grid.Row="0" Background="#FFFFFF" BorderBrush="#CCCCCC" BorderThickness="1,0,0,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="8">
                        <TextBlock Text="属性" FontSize="13" FontWeight="Bold" Foreground="#333333" Padding="8,6" Background="#F0F0F0"/>
                        <Border Background="#F0F0F0" Padding="8" Margin="0,0,0,8" CornerRadius="3">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="节点名称" VerticalAlignment="Center" FontSize="12"/>
                                <TextBox Grid.Column="1" Text="图像采集_1" Padding="6,4" FontSize="12"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- 右侧下方: 日志窗口 -->
            <Border Grid.Column="2" Grid.Row="1" Background="#FFFFFF" BorderBrush="#CCCCCC" BorderThickness="1,1,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0" Background="#F0F0F0" BorderBrush="#CCCCCC" BorderThickness="0,0,0,1" Padding="8,4">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📋" FontSize="14" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="日志" FontWeight="Bold" VerticalAlignment="Center" FontSize="13"/>
                        </StackPanel>
                    </Border>
                    <RichTextBox Grid.Row="1" IsReadOnly="True" Background="#F8F8F8" BorderThickness="0" FontFamily="Consolas" FontSize="11">
                        <FlowDocument>
                            <Paragraph>
                                <Run Foreground="#0066CC">[系统] 就绪</Run>
                            </Paragraph>
                        </FlowDocument>
                    </RichTextBox>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
</Window>
